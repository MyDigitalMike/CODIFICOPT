<div>
  <!-- Barra de búsqueda -->
  <div *ngIf="searchEnabled" class="mb-3">
    <input type="text" [(ngModel)]="searchTerm" (input)="onSearch()" class="form-control" placeholder="Buscar..." />
  </div>

  <!-- Tabla dinámica -->
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th *ngFor="let column of columns" (click)="sortData(column.field)">
          {{ column.header }}
          <span *ngIf="sortColumn === column.field">
            {{ sortDirection === 'asc' ? '▲' : '▼' }}
          </span>
        </th>
      </tr>
      <tr>
        <th></th>
      </tr>
      <tr>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let row of displayedData">
        <td *ngFor="let column of columns">{{ row[column.field] }}</td>
        <td *ngIf="hasButtons"><button type="button" class="btn btn-outline-danger fw-bold"
            (click)="openOrdersModal(row.custId)">VIEW ORDERS</button>
        </td>
        <td *ngIf="hasButtons"><button type="button" class="btn btn-outline-success fw-bold" (click)="openNewOrderModal()">NEW
            ORDER</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Paginación -->
  <nav *ngIf="totalPages > 1">
    <ul class="pagination justify-content-end">
      <li class="page-item me-3 d-flex align-items-center">
        <label for="rowsPerPage" class="me-2 mb-0">Rows per page:</label>
        <select id="rowsPerPage" class="form-select form-select-sm w-auto" [value]="itemsPerPage"
          (change)="handleItemsPerPageChange($event)">
          <option *ngFor="let size of [5, 10, 20, 50, 100]" [value]="size">
            {{ size }}
          </option>
        </select>
      </li>
      <li class="page-item disabled">
        <a class="page-link bg-light border-0 text-dark">
          {{ getStartIndex() + 1 }} - {{ getEndIndex() }} of {{ filteredData.length }}
        </a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === 1" (click)="changePage(currentPage - 1)">
        <a class="page-link fw-bold"> &lt; </a>
      </li>
      <li class="page-item" [class.disabled]="currentPage === totalPages" (click)="changePage(currentPage + 1)">
        <a class="page-link fw-bold">&gt;</a>
      </li>
    </ul>
  </nav>
</div>
