<div class="mb-4">
  <div class="p-3 mb-2 bg-success text-white">Customer AHPOP - New Order</div>
  <div class="d-flex flex-column justify-content-center mx-auto col-md-10">
    <h4>Order</h4>
    <!-- Selector de empleados -->
    <form [formGroup]="orderForm" (ngSubmit)="onSubmit()">
      <div class=" d-flex flex-row justify-content-around col-md-12 gap-2 mb-4">
        <ng-select [items]="employees" bindLabel="fullName" bindValue="empId" placeholder="Employee*"
          [(ngModel)]="selectedEmployee" formControlName="empId" required class="col-md-6"></ng-select>
        <ng-select [items]="shippers" bindLabel="companyName" bindValue="shipperId" placeholder="Shipper*"
          [(ngModel)]="selectedShipper" formControlName="shipperId" required class="col-md-6"></ng-select>
      </div>
      <div class="form-group mb-3">
        <input id="shipName" type="text" class="form-control" formControlName="shipName" placeholder="Ship Name*" />
      </div>
      <div class="d-flex flex-row justify-content-around col-md-12 gap-2 mb-4">
        <input id="shipAddress" type="text" class="form-control" formControlName="shipAddress"
          placeholder="Ship Address*" />
        <input id="shipCity" type="text" class="form-control" formControlName="shipCity" placeholder="Ship City*" />
        <input id="shipCountry" type="text" class="form-control" formControlName="shipCountry"
          placeholder="Ship Country*" />
      </div>
      <div class="d-flex flex-row justify-content-around col-md-12 gap-2 mb-4">
        <div class="form-group col-md-3">
          <label>Order Date</label>
          <input id="orderDate" type="datetime-local" class="form-control my-1" formControlName="orderDate"
            placeholder="Order Date*" />
        </div>
        <div class="form-group col-md-3">
          <label>Required Date</label>
          <input id="requiredDate" type="datetime-local" class="form-control my-1" formControlName="requiredDate"
            placeholder="Required Date*" />
        </div>
        <div class="form-group col-md-3">
          <label>Shipped Date</label>
          <input id="requiredDate" type="datetime-local" class="form-control my-1" formControlName="shippedDate"
            placeholder="Ship Country*" />
        </div>

      </div>
      <div>
        <label>
          Freight
        </label>
        <input id="freight" type="number" class="form-control" formControlName="freight" placeholder="$" min="0" />
        <div class="form-group mb-3 my-3">
          <h4 class="text-bold">Order Details</h4>
        </div>

      </div>
      <div formArrayName="orderDetails" class="border p-3 mb-4">
        <div *ngFor="let detail of orderDetails.controls; let i = index" [formGroupName]="i">
          <div class="mb-3">
            <ng-select [items]="products" bindLabel="productName" bindValue="productId" placeholder="Select a product"
              [(ngModel)]="selectedProduct" name="productSelect" formControlName="productId" required></ng-select>
          </div>
          <div class="d-flex flex-row justify-content-around col-md-12 gap-2 mb-4">
            <div class="form-group">
              <label>Unit Price</label>
              <input id="unitPrice" type="number" class="form-control" formControlName="unitPrice" min="0"/>
            </div>
            <div class="form-group">
              <label>Quantity</label>
              <input id="qty" type="number" class="form-control" formControlName="qty" min="0"/>
            </div>
            <div class="form-group">
              <label>Discount</label>
              <input id="discount" type="number" step="0.01" class="form-control" formControlName="discount" min="0"/>
            </div>
          </div>
        </div>


      </div>
      <div class="d-flex flex-row justify-content-end gap-2">
        <button type="button" class="btn btn-outline-success col-lg-2" (click)="activeModal.dismiss()">CLOSE</button>
        <button type="submit" class="btn btn-outline-success" [disabled]="orderForm.invalid">SAVE</button>
      </div>
    </form>
  </div>
</div>
